--- 
layout: post
tags: []

type: post
meta: 
  _encloseme: "1"
published: true
title: 在网站中使用自定义字体

status: publish
category: tech
---
<span class="Apple-style-span" style="font-family: 'Times New Roman'; line-height: normal; font-size: medium; ">
<h1 class="title" style="text-align: center; ">在网站中使用自定义字体</h1>
<p>本博客所有内容采用&nbsp;<a class="reference external" href="http://creativecommons.org/about/licenses/meet-the-licenses" target="_blank">Creative Commons Licenses</a>&nbsp;许可使用. 引用本内容时，请保留&nbsp;<a class="reference external" href="http://sites.google.com/site/towerjoo" target="_blank">朱涛</a>,&nbsp;<a class="reference external" href="http://www.cnblogs.com/mindsbook" target="_blank">出处</a>&nbsp;，并且&nbsp;<strong>非商业</strong>&nbsp;.</p>
<p>点击&nbsp;<a class="reference external" href="http://feed.feedsky.com/MindsbookTowerJoo" target="_blank">订阅</a>&nbsp;来订阅本博客.(推荐使用&nbsp;<a class="reference external" href="http://reader.google.com/" target="_blank">google reader</a>, 如果你的浏览器不支持直接订阅,请直接在&nbsp;<a class="reference external" href="http://reader.google.com/" target="_blank">google reader</a>&nbsp;中手动添加).</p>
<p>点击&nbsp;<a class="reference external" href="http://groups.google.com/group/python-share/web/%E5%9C%A8%E7%BD%91%E7%AB%99%E4%B8%AD%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AD%97%E4%BD%93.pdf" target="_blank">下载pdf阅读</a>&nbsp;(如果浏览器不支持直接打开,请点击右键另存)</p>
<div class="section" id="id2">
<h1><a class="toc-backref" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id17" style="text-decoration: none; color: black; " target="_blank">摘要</a></h1>
<p>本文主要介绍如何比较高效,优雅地在自己的web中使用自定义(用户本地没有的)字体, 从而提高自己网站的用户体验.</p>
<p>最后,简单分析了这种解决方案的优缺点,从而为这样的需求提供一种比较可靠而公正的选择参考.</p>
<div class="contents topic" id="contents" style="margin-top: 2em; margin-right: 2em; margin-bottom: 2em; margin-left: 2em; ">
<p class="topic-title first" style="margin-top: 0px !important; font-weight: bold; ">Contents</p>
<ul class="simple" style="margin-bottom: 1em; ">
     <li><a class="reference internal" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id2" id="id17" target="_blank">摘要</a></li>
     <li><a class="reference internal" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id3" id="id18" target="_blank">引入</a></li>
     <li><a class="reference internal" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id4" id="id19" target="_blank">找寻解决方案</a>
     <ul>
         <li><a class="reference internal" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id5" id="id20" target="_blank">转换为图片</a></li>
         <li><a class="reference internal" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#js" id="id21" target="_blank">使用js动态替换</a></li>
     </ul>
     </li>
     <li><a class="reference internal" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id6" id="id22" target="_blank">实现分析</a>
     <ul>
         <li><a class="reference internal" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id7" id="id23" target="_blank">转换为图片</a></li>
         <li><a class="reference internal" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id8" id="id24" target="_blank">使用js动态替换</a></li>
     </ul>
     </li>
     <li><a class="reference internal" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id9" id="id25" target="_blank">结论</a></li>
     <li><a class="reference internal" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id10" id="id26" target="_blank">后记</a></li>
     <li><a class="reference internal" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id11" id="id27" target="_blank">参考资料</a></li>
     <li><a class="reference internal" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id12" id="id28" target="_blank">本文的源码</a></li>
</ul>
</div>
</div>
<div class="section" id="id3">
<h1><a class="toc-backref" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id18" style="text-decoration: none; color: black; " target="_blank">引入</a></h1>
<p>最近在项目中有这样一个需求,就是我们要使用一些比较特殊的字体, 有多么特殊呢,不妨先睹为快, 请看下图:</p>
<img alt="http://farm3.static.flickr.com/2547/4119641278_c733470b78_o.png" src="http://farm3.static.flickr.com/2547/4119641278_c733470b78_o.png" style="width:600px; height:150px;" />
<p>上图中,其中第一行,第三行是正常字体,二四行是使用的自定义字体. 效果的差异非常明显.</p>
<p>为了给用户留下比较深刻的印象(我们已经厌烦了千篇一律的字体?), 我们决定在网页的一部分元素上使用自定义的字体.</p>
</div>
<div class="section" id="id4">
<h1><a class="toc-backref" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id19" style="text-decoration: none; color: black; " target="_blank">找寻解决方案</a></h1>
<p>根据我们自己的知识储备,我们确定了可能的几种方案:</p>
<ol class="arabic simple" style="margin-bottom: 1em; list-style-type: decimal; list-style-position: initial; list-style-image: initial; ">
     <li>转换为图片</li>
     <li>在用户加载页面时,为用户下载相应的字体文件到本地</li>
     <li>其它.</li>
</ol>
<p>我们直接排除了方案2,因为这里面会存在安全的问题,而且并非所有的用户都会允许服务器给他下载特殊格式的文件.</p>
<p>于是我们继续确定方案. 我们认为这并不是一个特别&nbsp;<strong>小众</strong>&nbsp;的需求,所以internet上应该有对应的解决方案.</p>
<p>于是我们有了第一次的尝试.&nbsp;<strong>使用python的PIL库来实时地转换需要的字体, 以图片的形式呈现给用户.</strong>.</p>
<div class="section" id="id5">
<h2><a class="toc-backref" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id20" style="text-decoration: none; color: black; " target="_blank">转换为图片</a></h2>
<p>我便写了下面一个用来生成对应内容的图片的类. 可以点击&nbsp;<a class="reference external" href="http://groups.google.com/group/python-share/web/custom_fonts.py" target="_blank">下载python源码</a>&nbsp;(注意如果想在本地运行,请指定相应的truetype字体路径).</p>
<div class="highlight">
<pre><span style="color: #008000; font-weight: bold; ">import</span> <span style="color: #0000ff; font-weight: bold; ">ImageFont</span><span style="color: #666666; ">,</span> <span style="color: #0000ff; font-weight: bold; ">ImageDraw</span>
<span style="color: #008000; font-weight: bold; ">from</span> <span style="color: #0000ff; font-weight: bold; ">PIL</span> <span style="color: #008000; font-weight: bold; ">import</span> Image
<span style="color: #008000; font-weight: bold; ">class</span> <span style="color: #0000ff; font-weight: bold; ">CustomFonts</span>:
<span style="color: #ba2121; font-style: italic; ">"""</span>
<span style="color: #ba2121; font-style: italic; "> To generate the custom fonts using PIL</span>
<span style="color: #ba2121; font-style: italic; "> """</span>
<span style="color: #008000; font-weight: bold; ">def</span> <span style="color: #0000ff; ">__init__</span>(<span style="color: #008000; ">self</span>, text, mode<span style="color: #666666; ">=</span><span style="color: #ba2121; ">"RGBA"</span>, font<span style="color: #666666; ">=</span><span style="color: #ba2121; ">"TIVERTON.TTF"</span>, encoding<span style="color: #666666; ">=</span><span style="color: #ba2121; ">"armn"</span>, font_color<span style="color: #666666; ">=</span><span style="color: #ba2121; ">"red"</span>, 
font_width<span style="color: #666666; ">=7</span>, h_w<span style="color: #666666; ">=3.5</span>):
<span style="color: #ba2121; font-style: italic; ">"""</span>
<span style="color: #ba2121; font-style: italic; "> encoding=armn is the result of test, other encodings don't work. a little magic.</span>
<span style="color: #ba2121; font-style: italic; "> text: the content to generate</span>
<span style="color: #ba2121; font-style: italic; "> font_width: width of the font</span>
<span style="color: #ba2121; font-style: italic; "> h_w : the value of height/width</span>
<span style="color: #ba2121; font-style: italic; "> """</span>
<span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>mode <span style="color: #666666; ">=</span> mode
<span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>font <span style="color: #666666; ">=</span> font
<span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>font_size <span style="color: #666666; ">=</span> (font_width, <span style="color: #008000; ">int</span>(font_width<span style="color: #666666; ">*</span>h_w))
<span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>encoding <span style="color: #666666; ">=</span> encoding
<span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>font_color <span style="color: #666666; ">=</span> font_color
<span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>text <span style="color: #666666; ">=</span> text
<span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>image_size <span style="color: #666666; ">=</span> (<span style="color: #666666; ">0</span>, <span style="color: #666666; ">0</span>)
<span style="color: #008000; font-weight: bold; ">def</span> <span style="color: #0000ff; ">adjust</span>(<span style="color: #008000; ">self</span>, w_adjust<span style="color: #666666; ">=0</span>, h_adjust<span style="color: #666666; ">=0</span>):
<span style="color: #ba2121; font-style: italic; ">"""</span>
<span style="color: #ba2121; font-style: italic; "> adjust the width and height</span>
<span style="color: #ba2121; font-style: italic; "> """</span>
<span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>image_size <span style="color: #666666; ">=</span> (<span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>image_size[<span style="color: #666666; ">0</span>] <span style="color: #666666; ">-</span> w_adjust, <span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>image_size[<span style="color: #666666; ">1</span>] <span style="color: #666666; ">-</span> h_adjust)
<span style="color: #008000; font-weight: bold; ">def</span> <span style="color: #0000ff; ">gen_proper_image_size</span>(<span style="color: #008000; ">self</span>, w_adjust<span style="color: #666666; ">=0</span>, h_adjust<span style="color: #666666; ">=0</span>):
<span style="color: #ba2121; font-style: italic; ">"""</span>
<span style="color: #ba2121; font-style: italic; "> get the output image's size based on the length of text</span>
<span style="color: #ba2121; font-style: italic; "> """</span>
size <span style="color: #666666; ">=</span> <span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>font_size[<span style="color: #666666; ">0</span>]
<span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>image_size <span style="color: #666666; ">=</span> (<span style="color: #008000; ">len</span>(<span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>text<span style="color: #666666; ">.</span>replace(<span style="color: #ba2121; ">" "</span>, <span style="color: #ba2121; ">""</span>)) <span style="color: #666666; ">*</span> size, <span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>font_size[<span style="color: #666666; ">1</span>])
<span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>adjust(w_adjust, h_adjust)
<span style="color: #008000; font-weight: bold; ">def</span> <span style="color: #0000ff; ">gen_images</span>(<span style="color: #008000; ">self</span>, output<span style="color: #666666; ">=</span><span style="color: #ba2121; ">""</span>):
<span style="color: #ba2121; font-style: italic; ">"""</span>
<span style="color: #ba2121; font-style: italic; "> generate the images based on the text</span>
<span style="color: #ba2121; font-style: italic; "> if output="", the name of the file will be the text with replacing blank with _</span>
<span style="color: #ba2121; font-style: italic; "> """</span>
<span style="color: #008000; font-weight: bold; ">if</span> output <span style="color: #666666; ">==</span> <span style="color: #ba2121; ">""</span>:
output <span style="color: #666666; ">=</span> <span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>text<span style="color: #666666; ">.</span>replace(<span style="color: #ba2121; ">" "</span>, <span style="color: #ba2121; ">"_"</span>)
<span style="color: #008000; font-weight: bold; ">if</span> output<span style="color: #666666; ">.</span>split(<span style="color: #ba2121; ">"."</span>)[<span style="color: #666666; ">-1</span>]<span style="color: #666666; ">.</span>lower() <span style="color: #aa22ff; font-weight: bold; ">not</span> <span style="color: #aa22ff; font-weight: bold; ">in</span> (<span style="color: #ba2121; ">"jpg"</span>, <span style="color: #ba2121; ">"jpeg"</span>, <span style="color: #ba2121; ">"png"</span>, <span style="color: #ba2121; ">"gif"</span>):
output <span style="color: #666666; ">+=</span> <span style="color: #ba2121; ">".png"</span>
image <span style="color: #666666; ">=</span> Image<span style="color: #666666; ">.</span>new(<span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>mode, <span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>image_size, (<span style="color: #666666; ">0</span>, <span style="color: #666666; ">0</span>, <span style="color: #666666; ">0</span>, <span style="color: #666666; ">0</span>))
draw <span style="color: #666666; ">=</span> ImageDraw<span style="color: #666666; ">.</span>Draw(image)
font <span style="color: #666666; ">=</span> ImageFont<span style="color: #666666; ">.</span>truetype(<span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>font, <span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>font_size[<span style="color: #666666; ">1</span>], encoding<span style="color: #666666; ">=</span><span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>encoding)
draw<span style="color: #666666; ">.</span>text((<span style="color: #666666; ">0</span>,<span style="color: #666666; ">0</span>), <span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>text, font<span style="color: #666666; ">=</span>font, fill<span style="color: #666666; ">=</span><span style="color: #008000; ">self</span><span style="color: #666666; ">.</span>font_color)
image<span style="color: #666666; ">.</span>save(output)
<span style="color: #008000; font-weight: bold; ">if</span> __name__ <span style="color: #666666; ">==</span> <span style="color: #ba2121; ">"__main__"</span>:
a <span style="color: #666666; ">=</span> CustomFonts(<span style="color: #ba2121; ">"this is for test output"</span><span style="color: #666666; ">.</span>lower())
a<span style="color: #666666; ">.</span>gen_proper_image_size()
a<span style="color: #666666; ">.</span>gen_images()
</pre>
</div>
<p>于是生成了类似于下面图片的文字:</p>
<img alt="http://farm3.static.flickr.com/2576/4119657680_c3d2d02a74_o.png" src="http://farm3.static.flickr.com/2576/4119657680_c3d2d02a74_o.png" />
<p>图片有点小,不过你能够看到,还是可用的.</p>
<p>但是, 在后面要生成数字的图片时出现了异常情况, 生成的图片总是半边, 查找了半天原因没有找到(现在想起 还是挺庆幸没有找到,否则可能就不会有后来的方案了.).</p>
<p>总结下这种方案的优劣:</p>
<ol class="arabic simple" style="margin-bottom: 1em; list-style-type: decimal; list-style-position: initial; list-style-image: initial; ">
     <li>涉及到图片的动态生成和加载(比较大的IO和内存开销)</li>
     <li>很难非常精确地生成图片(上面生成的例子并不完美,如果想要一个比较完美的结果,可能需要手动地调整参数不断观察)</li>
     <li>颜色和样式(因为直接生成的是图片,所以样式很难更改, 更不用说动态地去改变颜色等)</li>
     <li>用户体验(小图片作为菜单会出现不断加载的中间状态, 用户体验比较差)</li>
     <li>位于服务器端, 服务器的压力会增大</li>
</ol>
<p>好处是, 可以比较灵活地订制.</p>
</div>
<div class="section" id="js">
<h2><a class="toc-backref" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id21" style="text-decoration: none; color: black; " target="_blank">使用js动态替换</a></h2>
<p>当我无法找到那个数字问题的原因时,我开始尝试新的解决方案.</p>
<p>终于找到了篇博客,&nbsp;<a class="reference external" href="http://www.libhound.com/web-development/user-interfaces/5-techniques-to-use-custom-fonts-on-the-website" target="_blank">HOW TO USE CUSTOM FONTS ON THE WEBSITE</a>&nbsp;, 于是终于发现了&nbsp;<a class="reference external" href="http://wiki.github.com/sorccu/cufon/" target="_blank">CUFON</a>.</p>
<p>我们来看看它的feature:</p>
<ul class="simple" style="margin-bottom: 1em; ">
     <li>No plug-ins required &#8211; it can only use features natively supported by the client</li>
     <li>Compatibility &#8211; it has to work on every major browser on the market</li>
     <li>Ease of use &#8211; no or near-zero configuration needed for standard use cases</li>
     <li>Speed &#8211; it has to be fast, even for sufficiently large amounts of text</li>
</ul>
<p>我们来看看它生成的效果:</p>
<img alt="http://farm3.static.flickr.com/2730/4118905505_58bb76919a_o.png" src="http://farm3.static.flickr.com/2730/4118905505_58bb76919a_o.png" />
<p>我们来看看它是如何使用的:</p>
<div class="highlight">
<pre><span style="color: #008000; font-weight: bold; ">&lt;html&gt;</span>
<span style="color: #008000; font-weight: bold; ">&lt;head&gt;</span>
<span style="color: #008000; font-weight: bold; ">&lt;meta</span> <span style="color: #7d9029; ">http-equiv=</span><span style="color: #ba2121; ">"Content-Type"</span> <span style="color: #7d9029; ">content=</span><span style="color: #ba2121; ">"text/html; charset=utf-8"</span><span style="color: #008000; font-weight: bold; ">&gt;</span>
<span style="color: #008000; font-weight: bold; ">&lt;script </span><span style="color: #7d9029; ">src=</span><span style="color: #ba2121; ">"cufon-yui.js"</span> <span style="color: #7d9029; ">type=</span><span style="color: #ba2121; ">"text/javascript"</span><span style="color: #008000; font-weight: bold; ">&gt;&lt;/script&gt;</span>
<span style="color: #008000; font-weight: bold; ">&lt;script </span><span style="color: #7d9029; ">src=</span><span style="color: #ba2121; ">"Tiverton_400.font.js"</span> <span style="color: #7d9029; ">type=</span><span style="color: #ba2121; ">"text/javascript"</span><span style="color: #008000; font-weight: bold; ">&gt;&lt;/script&gt;</span>
<span style="color: #008000; font-weight: bold; ">&lt;script </span><span style="color: #7d9029; ">type=</span><span style="color: #ba2121; ">"text/javascript"</span><span style="color: #008000; font-weight: bold; ">&gt;</span>
Cufon.replace(<span style="color: #ba2121; ">'div'</span>);
<span style="color: #008000; font-weight: bold; ">&lt;/script&gt;</span>
<span style="color: #008000; font-weight: bold; ">&lt;/head&gt;</span>
<span style="color: #008000; font-weight: bold; ">&lt;body&gt;</span>
<span style="color: #008000; font-weight: bold; ">&lt;div</span> <span style="color: #7d9029; ">style=</span><span style="color: #ba2121; ">"font-wight:bold;font-size:45px;color:green;"</span> <span style="color: #008000; font-weight: bold; ">&gt;</span>
For Test Only. 2009-11-20
<span style="color: #008000; font-weight: bold; ">&lt;a</span> <span style="color: #7d9029; ">href=</span><span style="color: #ba2121; ">"http://www.cnblogs.com/mindsbook/"</span><span style="color: #008000; font-weight: bold; ">&gt;</span>zhutao<span style="color: #008000; font-weight: bold; ">&lt;/a&gt;</span>
<span style="color: #008000; font-weight: bold; ">&lt;/div&gt;</span>
<span style="color: #008000; font-weight: bold; ">&lt;/body&gt;</span>
<span style="color: #008000; font-weight: bold; ">&lt;/html&gt;</span>
</pre>
</div>
<p>非常简单, 需要注意的是:</p>
<ol class="arabic simple" style="margin-bottom: 1em; list-style-type: decimal; list-style-position: initial; list-style-image: initial; ">
     <li>你需要根据字体文件来生成一个js文件,以便于CUFON查找</li>
     <li>Cufon.replace('div'); 就是唯一的一句js用来动态地替换相应的文字</li>
     <li>可以为你的内容指定额外的样式.</li>
</ol>
<p>那么&nbsp;<a class="reference external" href="http://wiki.github.com/sorccu/cufon/" target="_blank">CUFON</a>&nbsp;有什么优缺点呢?</p>
<ol class="arabic simple" style="margin-bottom: 1em; list-style-type: decimal; list-style-position: initial; list-style-image: initial; ">
     <li>对于生成好的字体对应的js文件,其并不依赖于客户端有相应的字体安装</li>
     <li>由于js是客户端文件,所以除了首次加载外, 后面会有较好的性能和用户体验</li>
     <li>生成的不是图片,所以能够指定额外的样式(具体看下文中的实现分析)</li>
     <li>灵活</li>
</ol>
<p>缺点有: 字体的大小并不严格准确(问题不大),如果用户禁用了js这种方案会失效.</p>
</div>
</div>
<div class="section" id="id6">
<h1><a class="toc-backref" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id22" style="text-decoration: none; color: black; " target="_blank">实现分析</a></h1>
<p>那么我们来逐一分析二种方案的实现方式.</p>
<div class="section" id="id7">
<h2><a class="toc-backref" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id23" style="text-decoration: none; color: black; " target="_blank">转换为图片</a></h2>
<p>我们使用的是&nbsp;<a class="reference external" href="http://www.pythonware.com/products/pil/" target="_blank">PIL</a>&nbsp;,&nbsp;<a class="reference external" href="http://www.pythonware.com/products/pil/" target="_blank">PIL</a>&nbsp;目前是支持truetype字体的.&nbsp;<a class="reference external" href="http://www.pythonware.com/products/pil/" target="_blank">PIL</a>&nbsp;原理其实很简单, 就是使用像素来绘制相应的格式的图片(如例子中的png), 为每个像素添加相应的属性值, 如色度,灰度等.</p>
</div>
<div class="section" id="id8">
<h2><a class="toc-backref" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id24" style="text-decoration: none; color: black; " target="_blank">使用js动态替换</a></h2>
<p>详细地说明可以参考&nbsp;<a class="reference external" href="http://wiki.github.com/sorccu/cufon/about" target="_blank">How it works?</a></p>
<p>简单地说, 就是:</p>
<ol class="arabic simple" style="margin-bottom: 1em; list-style-type: decimal; list-style-position: initial; list-style-image: initial; ">
     <li>将字体文件(ttf)转换为svg font</li>
     <li>svn font转换为&nbsp;<a class="reference external" href="http://www.w3.org/TR/NOTE-VML.html" target="_blank">VML</a></li>
     <li>而&nbsp;<a class="reference external" href="http://www.w3.org/TR/NOTE-VML.html" target="_blank">VML</a>&nbsp;是浏览器所支持</li>
     <li><a class="reference external" href="http://wiki.github.com/sorccu/cufon/" target="_blank">CUFON</a>&nbsp;核心的js文件会屏蔽掉浏览器的差异,为不同的浏览器生成所支持的html</li>
</ol>
<p>在Firefox下生成的html(上面例子中的日期)如下:</p>
<div class="highlight">
<pre><span style="color: #008000; font-weight: bold; ">&lt;cufon</span> <span style="color: #7d9029; ">class=</span><span style="color: #ba2121; ">"cufon cufon-canvas"</span> <span style="color: #7d9029; ">alt=</span><span style="color: #ba2121; ">"2009-11-20 "</span> <span style="color: #7d9029; ">style=</span><span style="color: #ba2121; ">"width: 169px; height: 45px;"</span><span style="color: #008000; font-weight: bold; ">&gt;</span>
<span style="color: #008000; font-weight: bold; ">&lt;canvas</span> <span style="color: #7d9029; ">width=</span><span style="color: #ba2121; ">"189"</span> <span style="color: #7d9029; ">height=</span><span style="color: #ba2121; ">"63"</span> <span style="color: #7d9029; ">style=</span><span style="color: #ba2121; ">"width: 189px; height: 63px; top: -15px; left: 1px;"</span><span style="color: #008000; font-weight: bold; ">/&gt;</span>
<span style="color: #008000; font-weight: bold; ">&lt;cufontext&gt;</span>2009-11-20 <span style="color: #008000; font-weight: bold; ">&lt;/cufontext&gt;</span>
<span style="color: #008000; font-weight: bold; ">&lt;/cufon&gt;</span>
</pre>
</div>
</div>
</div>
<div class="section" id="id9">
<h1><a class="toc-backref" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id25" style="text-decoration: none; color: black; " target="_blank">结论</a></h1>
<p>使用&nbsp;<a class="reference external" href="http://wiki.github.com/sorccu/cufon/" target="_blank">CUFON</a>&nbsp;已经能够很好地满足我们的项目需求, 简单,强大而灵活, 也不用生成图片, 对浏览器的支持也很好, 所以,如果你的项目中要使用自定义字体, 我强烈推荐&nbsp;<a class="reference external" href="http://wiki.github.com/sorccu/cufon/" target="_blank">CUFON</a>.</p>
</div>
<div class="section" id="id10">
<h1><a class="toc-backref" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id26" style="text-decoration: none; color: black; " target="_blank">后记</a></h1>
<p>在本文的论述中并未对中文字体进行相关的调研, 但是笔者估计只要是truetype的字体应该 是没有问题的.</p>
<p>哪位朋友有兴趣不妨尝试下,记得反馈下结果啊. 谢谢.</p>
<p>欢迎交流.</p>
</div>
<div class="section" id="id11">
<h1><a class="toc-backref" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id27" style="text-decoration: none; color: black; " target="_blank">参考资料</a></h1>
<ol class="arabic simple" style="margin-bottom: 1em; list-style-type: decimal; list-style-position: initial; list-style-image: initial; ">
     <li><a class="reference external" href="http://www.libhound.com/web-development/user-interfaces/5-techniques-to-use-custom-fonts-on-the-website" target="_blank">HOW TO USE CUSTOM FONTS ON THE WEBSITE</a></li>
     <li><a class="reference external" href="http://wiki.github.com/sorccu/cufon/" target="_blank">CUFON</a></li>
     <li><a class="reference external" href="http://www.w3.org/TR/NOTE-VML.html" target="_blank">VML</a></li>
     <li><a class="reference external" href="http://www.pythonware.com/products/pil/" target="_blank">PIL</a></li>
</ol>
</div>
<div class="section" id="id12">
<h1><a class="toc-backref" href="http://www.cnblogs.com/mindsbook/admin/EditPosts.aspx?postid=1607188#id28" style="text-decoration: none; color: black; " target="_blank">本文的源码</a></h1>
<p>本文的rst源码链接在&nbsp;<a class="reference external" href="http://groups.google.com/group/python-share/web/using_custom_fonts_in_web.rst" target="_blank">这里</a>&nbsp;.</p>
<p>点击&nbsp;<a class="reference external" href="http://groups.google.com/group/python-share/web/%E5%9C%A8%E7%BD%91%E7%AB%99%E4%B8%AD%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AD%97%E4%BD%93.pdf" target="_blank">下载pdf阅读</a>&nbsp;(如果浏览器不支持直接打开,请点击右键另存)</p>
<p>可以点击&nbsp;<a class="reference external" href="http://groups.google.com/group/python-share/web/custom_fonts.py" target="_blank">下载python源码</a>&nbsp;(注意如果想在本地运行,请指定相应的truetype字体路径).</p>
</div>
</span>
