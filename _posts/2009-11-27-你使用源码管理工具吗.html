--- 
layout: post
tags: []

type: post
meta: 
  _encloseme: "1"
published: true
title: 你使用源码管理工具吗?

status: publish
category: tech
---
<span class="Apple-style-span" style="font-family: 'Times New Roman'; line-height: normal; font-size: medium; "><h1 class="title" style="text-align: center; ">你使用源码管理工具吗?</h1><p>本博客所有内容采用&nbsp;<a class="reference external" href="http://creativecommons.org/about/licenses/meet-the-licenses" target="_blank">Creative Commons Licenses</a>&nbsp;许可使用. 引用本内容时，请保留&nbsp;<a class="reference external" href="http://sites.google.com/site/towerjoo" target="_blank">朱涛</a>,&nbsp;<a class="reference external" href="http://www.cnblogs.com/mindsbook" target="_blank">出处</a>&nbsp;，并且&nbsp;<strong>非商业</strong>&nbsp;.</p><p>点击&nbsp;<a class="reference external" href="http://feed.feedsky.com/MindsbookTowerJoo" target="_blank">订阅</a>&nbsp;来订阅本博客.(推荐使用&nbsp;<a class="reference external" href="http://reader.google.com/" target="_blank">google reader</a>, 如果你的浏览器不支持直接订阅,请直接在&nbsp;<a class="reference external" href="http://reader.google.com/" target="_blank">google reader</a>&nbsp;中手动添加).</p><p>点击&nbsp;<a class="reference external" href="http://groups.google.com/group/python-share/web/%E4%BD%A0%E4%BD%BF%E7%94%A8%E6%BA%90%E7%A0%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E5%90%97.pdf" target="_blank">下载pdf阅读</a>&nbsp;(如果浏览器不支持直接打开,请点击右键另存)</p><div class="section" id="id2"><h1><a class="toc-backref" href="file:///E:/hg/zhutao.html#id17" style="text-decoration: none; color: black; " target="_blank">摘要</a></h1><p>本文主要介绍使用源码管理工具的好处, 及其几种常见的源码管理工具的比较等.</p><div class="contents topic" id="contents" style="margin-top: 2em; margin-right: 2em; margin-bottom: 2em; margin-left: 2em; "><p class="topic-title first" style="margin-top: 0px !important; font-weight: bold; ">Contents</p><ul class="simple" style="margin-bottom: 1em; "><li><a class="reference internal" href="file:///E:/hg/zhutao.html#id2" id="id17" target="_blank">摘要</a></li><li><a class="reference internal" href="file:///E:/hg/zhutao.html#id3" id="id18" target="_blank">引入</a></li><li><a class="reference internal" href="file:///E:/hg/zhutao.html#id4" id="id19" target="_blank">什么是源码管理工具</a></li><li><a class="reference internal" href="file:///E:/hg/zhutao.html#id5" id="id20" target="_blank">为什么要使用源码管理工具</a></li><li><a class="reference internal" href="file:///E:/hg/zhutao.html#id6" id="id21" target="_blank">源码管理工具介绍</a></li><li><a class="reference internal" href="file:///E:/hg/zhutao.html#id7" id="id22" target="_blank">一些建议</a></li><li><a class="reference internal" href="file:///E:/hg/zhutao.html#id8" id="id23" target="_blank">结论</a></li><li><a class="reference internal" href="file:///E:/hg/zhutao.html#id9" id="id24" target="_blank">后记</a></li><li><a class="reference internal" href="file:///E:/hg/zhutao.html#id10" id="id25" target="_blank">参考资料</a></li><li><a class="reference internal" href="file:///E:/hg/zhutao.html#id11" id="id26" target="_blank">本文的源码</a></li></ul></div></div><div class="section" id="id3"><h1><a class="toc-backref" href="file:///E:/hg/zhutao.html#id18" style="text-decoration: none; color: black; " target="_blank">引入</a></h1><p>其实故事是这样的:</p><p>上周一个本科的同学来北京出差, 和朋友一起去吃饭, 总共是3个人, 外包公司工作快3年的朋友(简称为A), 北邮研二的研究生朋友(简称为B), 和我. 一个偶然我们提到了技术,提到了源码管理工具,&nbsp;<a class="reference external" href="http://subversion.tigris.org/" target="_blank">svn</a>,&nbsp;<a class="reference external" href="http://en.wikipedia.org/wiki/Concurrent_Versions_System" target="_blank">cvs</a>,&nbsp;<a class="reference external" href="http://mercurial.selenic.com/" target="_blank">hg</a>,&nbsp;<a class="reference external" href="http://git-scm.com/" target="_blank">git</a>&nbsp;等. 友A有一定的了解, 说他们使用sourcesafe来进行代码管理, 言语中透露出对源码管理工具的不熟悉. 友B竟然没有听过!我一边感慨 国内教育,一边也语重心长地向他极力推荐了源码管理工具.</p><p>最近老在想, 为什么北邮的同学计算机专业硕士居然没听说过代码管理工具?作为程序员又有多少没听过没用过呢?</p><p>于是有了写这样一篇代码管理工具介绍的文章.</p></div><div class="section" id="id4"><h1><a class="toc-backref" href="file:///E:/hg/zhutao.html#id19" style="text-decoration: none; color: black; " target="_blank">什么是源码管理工具</a></h1><p>你用过CVS, SVN吗?你知道分布式的源码管理工具吗?</p><p>这里我也就不引用别的定义, 我只想说说我对源码管理工具的认识.</p><p>简单地说, 源码管理工具是一种&nbsp;<strong>记录代码更改历史, 可以无限回溯, 用于代码管理,多个程序员开发协作的工具</strong>.</p><p>常见的功能有:</p><ol class="arabic simple" style="margin-bottom: 1em; list-style-type: decimal; list-style-position: initial; list-style-image: initial; "><li>更新到任意一个版本(不用担心代码的修改错误,和丢失等)</li><li>日志记录(说明修改目的)</li><li>分支,标签(用于协作开发, 和便于阶段性产品发布)</li><li>合并,比较(用于多人,多分支之间的代码合并,比对等)</li></ol></div><div class="section" id="id5"><h1><a class="toc-backref" href="file:///E:/hg/zhutao.html#id20" style="text-decoration: none; color: black; " target="_blank">为什么要使用源码管理工具</a></h1><p>你可能会想, 需求出来了, 老大把我要做的功能告诉我,我去写代码就行,完事了,我再打包发给他 让他加入到整个代码中,然后测试.有问题再反馈回来,我再修改,再打包.这样不是也挺好吗?</p><p>当然我要说,这样当然是可以的,但是如果你们要修改同一个文件怎么办?你们还得事先商量确定 某个时间某个人不能修改等等. 或者新建不同的名字的文件,最后由一个人来合并.</p><p>如果你的团队不是3,5个人,而是30,50人呢?你这样的沟通和重复性工作的成本会有多高?</p><p>于是聪明的程序员便有了版本控制的设想, 继而有了源码管理工具的不断推陈出新.</p><p>如果你稍微开发过一个正式的项目,想必你对&nbsp;<a class="reference external" href="http://en.wikipedia.org/wiki/Concurrent_Versions_System" target="_blank">cvs</a>,&nbsp;<a class="reference external" href="http://subversion.tigris.org/" target="_blank">svn</a>,&nbsp;<a class="reference external" href="http://mercurial.selenic.com/" target="_blank">hg</a>,&nbsp;<a class="reference external" href="http://git-scm.com/" target="_blank">git</a>&nbsp;这些也一定 有所耳闻.</p><p>下面就简单根据我个人的一些项目经验来介绍下2类的源码管理工具.</p></div><div class="section" id="id6"><h1><a class="toc-backref" href="file:///E:/hg/zhutao.html#id21" style="text-decoration: none; color: black; " target="_blank">源码管理工具介绍</a></h1><p>简单地可以将源码管理工具分为两类:&nbsp;<a class="reference external" href="http://subversion.tigris.org/" target="_blank">svn</a>&nbsp;这样的集中式的,和&nbsp;<a class="reference external" href="http://mercurial.selenic.com/" target="_blank">hg</a>&nbsp;这样的分布式的.</p><p>因为我个人对&nbsp;<a class="reference external" href="http://subversion.tigris.org/" target="_blank">svn</a>&nbsp;和&nbsp;<a class="reference external" href="http://mercurial.selenic.com/" target="_blank">hg</a>&nbsp;比较熟悉,所以下面就以这二种具体的工具为代表来说明二者的优劣.</p><p>第一次接触源码管理工具就是&nbsp;<a class="reference external" href="http://subversion.tigris.org/" target="_blank">svn</a>, 想着那时对于什么&nbsp;<strong>增量修改</strong>,&nbsp;<strong>历史记录</strong>&nbsp;等概念不清楚时, 也曾在写了2小时的代码后,提交svn时失误而导致文件被删除的悲惨历史. 惨痛的教训让我开始了系统地 学习svn的过程, 一天后,我明白了它的原理, 这时会很晰明确地知道每个命令的结果, 也会很清楚地知道 自己怎样做才是最合适的.</p><p>简单总结一些best practice:</p><ol class="arabic simple" style="margin-bottom: 1em; list-style-type: decimal; list-style-position: initial; list-style-image: initial; "><li>Check in early, Check in often(这个是很重要的,尤其是多个开发的团队,这样可以大大减少冲突的可能)</li><li>发现冲突第一时间解决(不能将冲突留给你的同事,发现了第一时间解决, 如果需要要向冲突的相关同事沟通交流)</li><li>只提交需要提交的文件(一些临时文件不要提交,不能污染整个代码库)</li><li>熟悉常用的命令,如add/rm/up/ci/co/stat/merge/diff等</li></ol><p>大致一个月后,我逐渐明白一个源码管理工具对于一个项目的意义和作用. 自此后, 我去公司实习我会第一时间询问 他们是否使用源码管理工具,使用哪种工具. 而对于自己的一些业余项目,我也通常是使用&nbsp;<a class="reference external" href="http://code.google.com/" target="_blank">google code</a>&nbsp;来管理起来, 甚至当前的这些博客的源码(不过最近已经迁移到了hg的一个hosting service下,原因请参考下文).</p><p>到了去年的晚些时候, 开始知道了分布式源码管理工具, 了解了它与集中式工具的区别和优势. 也听到了一个小故事,</p><pre class="literal-block" style="margin-left: 2em; margin-right: 2em; ">说是Linux的作者Linus大牛不满svn, 于是自己花了一周(?抱歉具体时间记不得了)写了个分布式的代码管理工具,
于是就有了大名鼎鼎的git.
</pre><p>我们不去羡慕Linus大牛的英明神武(啊,真是牛啊!), 我们来关心他的作品&nbsp;<strong>分布式代码管理工具</strong>. 它与集中式的 究竟有什么区别呢?</p><p>我以&nbsp;<a class="reference external" href="http://mercurial.selenic.com/" target="_blank">hg</a>&nbsp;为例来说明与&nbsp;<a class="reference external" href="http://subversion.tigris.org/" target="_blank">svn</a>&nbsp;的不同:</p><ol class="arabic" style="list-style-type: decimal; list-style-position: initial; list-style-image: initial; "><li><p class="first" style="margin-top: 0px !important; ">每个work copy(也就你自己检出的代码)都具有完整的代码库信息, 这也就是说:</p><blockquote><ul class="simple" style="margin-bottom: 1em; "><li>对于检出的代码,我们无论是查看log, 提交代码, 或者删除等都是本地的操作,而无需与服务器打交道</li><li>只有push/pull两个操作(其它的初始化等操作不计入内)与服务器打交道,其它的日常操作都是本地</li></ul></blockquote></li><li><p class="first" style="margin-top: 0px !important; ">集中式的版本文件信息(所有的版本文件信息都位于项目根目录下的.hg目录下,而不像svn每个目录下都有一个.svn目录)</p></li><li><p class="first" style="margin-top: 0px !important; ">简单的忽略文件设置:.ignore文件中可以简单地设置你不希望提交到版本库的文件(支持通配符)</p></li></ol><p>简单地说,我更喜欢hg的原因是,我无需再为了查看log而等半天(与服务器通信), 这样大大地方便了网络不好, 分布式的开发环境.</p></div><div class="section" id="id7"><h1><a class="toc-backref" href="file:///E:/hg/zhutao.html#id22" style="text-decoration: none; color: black; " target="_blank">一些建议</a></h1><p>我不说使用了代码管理工具的公司就是好公司,但是我肯定没有使用代码管理工具的公司肯定不是好公司.</p><p>同样, 使用了代码管理工具的程序员不一定就是好程序员,但是没有使用代码管理工具的程序员肯定不是好程序员(至少 没有经历过一个真正的多人协作的项目).</p><p>以我个人的项目经历,我极力向我的读者建议:</p><p>如果你没有使用过代码管理工具,请赶紧去学习一种(个人推荐&nbsp;<a class="reference external" href="http://mercurial.selenic.com/" target="_blank">hg</a>).</p><p>如果你还使用的是&nbsp;<a class="reference external" href="http://subversion.tigris.org/" target="_blank">svn</a>, 推荐你去尝试下&nbsp;<a class="reference external" href="http://mercurial.selenic.com/" target="_blank">hg</a>.</p><p>如果你在做一些业余的项目,也建议你使用代码管理工具,即使是一个人. 甚至你也可以将文档, 知识管理, 博客等也用代码管理工具版本化起来.</p><p>当然这里提到的几种代码管理工具都是有GUI版本的和命令行版本的, 个人还是极力推荐使用命令行, 为什么,可以参考这里&nbsp;<a class="reference external" href="http://www.cnblogs.com/mindsbook/archive/2009/11/09/improve_porgammer_productivity_1.html" target="_blank">如何提高程序员的生产率</a>.</p></div><div class="section" id="id8"><h1><a class="toc-backref" href="file:///E:/hg/zhutao.html#id23" style="text-decoration: none; color: black; " target="_blank">结论</a></h1><p>代码管理工具对程序员而讲是必不可少的开发工具, 选择一个合适的工具并且熟知它的常用命令,会让你的 开发(你的团队的开发)变得事半功倍.</p><p>你在使用什么代码管理工具呢? 欢迎留言说明.</p></div><div class="section" id="id9"><h1><a class="toc-backref" href="file:///E:/hg/zhutao.html#id24" style="text-decoration: none; color: black; " target="_blank">后记</a></h1><p>对了,差点忘了推荐几个常用的hosting服务, 常用的如下:</p><ol class="arabic simple" style="margin-bottom: 1em; list-style-type: decimal; list-style-position: initial; list-style-image: initial; "><li><a class="reference external" href="http://code.google.com/" target="_blank">google code</a>&nbsp;(支持svn, hg)</li><li><a class="reference external" href="http://bitbucket.org/" target="_blank">bitbucket</a>&nbsp;(hg, 极为推荐, 免费提供1个private和任意多个public的代码库)</li><li><a class="reference external" href="http://github.com/" target="_blank">github</a>&nbsp;(git)</li></ol><p>当然上述的都是免费的服务,建议大家尝试下.</p></div><div class="section" id="id10"><h1><a class="toc-backref" href="file:///E:/hg/zhutao.html#id25" style="text-decoration: none; color: black; " target="_blank">参考资料</a></h1><ol class="arabic simple" style="margin-bottom: 1em; list-style-type: decimal; list-style-position: initial; list-style-image: initial; "><li><a class="reference external" href="http://www.cnblogs.com/mindsbook/archive/2009/11/09/improve_porgammer_productivity_1.html" target="_blank">如何提高程序员的生产率</a></li><li><a class="reference external" href="http://git-scm.com/" target="_blank">git</a></li><li><a class="reference external" href="http://mercurial.selenic.com/" target="_blank">hg</a></li><li><a class="reference external" href="http://en.wikipedia.org/wiki/Concurrent_Versions_System" target="_blank">cvs</a></li><li><a class="reference external" href="http://subversion.tigris.org/" target="_blank">svn</a></li></ol></div><div class="section" id="id11"><h1><a class="toc-backref" href="file:///E:/hg/zhutao.html#id26" style="text-decoration: none; color: black; " target="_blank">本文的源码</a></h1><p>本文的rst源码链接在&nbsp;<a class="reference external" href="http://groups.google.com/group/python-share/web/do_you_use_scm.rst" target="_blank">这里</a>&nbsp;.</p><p>点击&nbsp;<a class="reference external" href="http://groups.google.com/group/python-share/web/%E4%BD%A0%E4%BD%BF%E7%94%A8%E6%BA%90%E7%A0%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E5%90%97.pdf" target="_blank">下载pdf阅读</a>&nbsp;(如果浏览器不支持直接打开,请点击右键另存)</p></div></span>
